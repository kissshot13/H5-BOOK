### Vuex 辅助函数

 - mapState
   
   在mapState中提供的示例代码为：
    
    ```javascript
    // vuex 提供了独立的构建工具函数 Vuex.mapState
    import { mapState } from 'vuex'
    export default {
      // ...
      computed: mapState({
        // 箭头函数可以让代码非常简洁
        count: state => state.count,
        // 传入字符串 'count' 等同于 `state => state.count`
        countAlias: 'count',
        // 想访问局部状态，就必须借助于一个普通函数，函数中使用 `this` 获取局部状态
        countPlusLocalState (state) {
          return state.count + this.localCount
        }
      })
    }    
    ```
    当计算属性名称和状态树名称相对应的的时候，我们可以向mapState传入一个字符串数组
    ```js
    computed: mapState([ // 映射 this.count 到 this.$store.state.count 'count' ])
    ```
    通过栗子，我们可以看到mapState函数可以接受一个对象，也可以接受一个数组，看看函数的底层：
    
    ```js
    export function mapState (states) {
      const res = {}
      normalizeMap(states).forEach(({ key, val }) => {
        res[key] = function mappedState () {
          return typeof val === 'function'
            ? val.call(this, this.$store.state, this.$store.getters)
            : this.$store.state[val]
        }
      })
      return res
    }
   function normalizeMap (map) {
    return Array.isArray(map)
      ? map.map(key => ({ key, val: key }))
      : Object.keys(map).map(key => ({ key, val: map[key] }))
  }
    ```
   `normalizeMap`判断map是否是数组还是对象，数组返回 `{key,val:key}`形式的对象数组，对象返回`{key.val:map[key]}`形式的数组对象
   `mapState`函数，`forEach`判断对象是否是函数，是函数调用call方法直接执行，不是函数返回`this.$store.state[val]`,最终返回`res`对象